@use "constants" as *;
@use "calculations" as *;
@use "settings" as *;
@use "mixins-etc" as *;

// .body-text {
// 	// Il-Lanza, Il-Labra, Il-Qoffa, l-Azzarin
// 	.special-100 {
// 		display: inline-block;
// 		margin-left: 70%;
// 	}
// 	.special-101 {
// 		display: inline-block;
// 		margin-left: calc(70% + 40px);
// 	}
// }

// .body-text mark {
//   /* font-weight: bolder; */
//   background: linear-gradient(
//       104deg,
//       rgba(130, 173, 255, 0) 0.9%,
//       rgba(130, 173, 255, 0.25) 2.4%,
//       rgba(130, 173, 255, 0.5) 5.8%,
//       rgba(130, 173, 255, 0.1) 93%,
//       rgba(130, 173, 255, 0.7) 96%,
//       rgba(130, 173, 255, 0) 98%
//     ),
//     linear-gradient(
//       184deg,
//       rgba(130, 173, 255, 0) 0%,
//       rgba(130, 173, 255, 0.3) 7.9%,
//       rgba(130, 173, 255, 0) 15%
//     );
//   padding: 0.6em 13.7px;
//   box-decoration-break: clone;
//   -webkit-box-decoration-break: clone;
//   margin: 0;
//   border-radius: 7.5px;
//   text-shadow: -12px 12px 9.8px rgba(130, 173, 255, 0.7),
//     21px -18.1px 7.3px rgba(255, 255, 255, 1),
//     -18.1px -27.3px 30px rgba(255, 255, 255, 1);
// }

// .body-text mark {
//   background-color: rgba(130, 173, 255, 0.4);
// }

// yellow
// rgb(235, 214, 97),
// rgb(235, 214, 97) 90%

// lightblue
// rgb(173, 216, 230),
// rgb(173, 216, 230) 90%
// .body-text mark {
//   color: $paper;
//   background: linear-gradient(
//     to bottom,
//     transparent,
//     transparent 10%,
//     #399,
//     #399 0%
//   );
//   background-size: 100% 26.88px;
//   line-height: 26.88px;
// }
.body-text mark {
  color: $paper;
  background: #743399;
}

article.story {
  &.story-18 {
    // Mona Lisa
    .fx1 {
      color: hsl(0, 0%, 39%);
      margin-bottom: 0;
      text-align: center;
      transform: scale(-1, 1);
    }
    .fx2 {
      margin-bottom: 0;
      text-align: center;
    }
  }
  &.story-33 {
    // Joey Tilbes (Diċembru 2023)
    h1 {
      letter-spacing: -0.15px;
    }
  }
  &.story-40 {
    // Il-Mara tas-Suldat
    #grid-body {
      margin-top: $body-margin-half * -1;
      hr {
        visibility: none;
        margin-bottom: $body-margin-half + $body-margin-quarter;
      }
      h5,
      h6 {
        font-family: "Alegreya Sans SC Bold";
        font-size: $font-size-smallcaps;
        font-style: normal;
        font-variant: small-caps;
        font-weight: 700;
        line-height: 1;
        position: relative;
        text-transform: lowercase;
        .fx1 {
          font-family: "Alegreya Regular";
          font-variant: normal;
          font-weight: 400;
          position: absolute;
          text-align: right;
          width: 5px;
          left: -5px;
          text-transform: lowercase;
          font-size: 0.8rem;
          top: 5px;
        }
      }
      h5 {
        display: inline;
        padding-right: 0.25rem;
        & + p {
          display: inline;
        }
      }
      p {
        a[href^="#"] {
          font-weight: 600;
          position: relative;
          &:has(.fx1) {
            padding-left: 5px;
          }
          .fx1 {
            font-variant: normal;
            position: absolute;
            text-align: right;
            width: 5px;
            left: 0px;
            text-transform: lowercase;
            font-size: 0.9rem;
            font-weight: 600;
            top: 1px;
          }
        }
        & + p {
          margin-bottom: 0;
          margin-top: $body-margin-half;
        }
        &.enjambed + p {
          margin-top: 0;
        }
        &.centred + p.centred {
          margin-top: 0;
        }
      }
    }
    aside {
      p.fx2 {
        a {
          display: inline-block;
          font-size: $font-size-compact;
          text-transform: uppercase;
        }
      }
      p.fx3 {
        border: 1px solid $lightester-brown;
        padding: $body-margin;
      }
    }
    @media all and (min-width: $laptop-breakpoint) {
      #grid-body {
        .splide {
          margin-left: 0;
          width: 100%;
        }
      }
    }
  }
  &.story-48 {
    // Splużjonijiet
    p.fx1 {
      margin-bottom: $body-margin-quarter;
      margin-left: $body-margin;
      text-indent: $body-margin * -1;
      span.fx1 {
        margin-right: $body-margin-quarter;
        &:after {
          color: $lightest-brown;
          content: ":";
        }
        display: inline-block;
        text-align: right;
        width: $body-margin-half + $body-margin-quarter;
      }
      &:last-of-type {
        margin-bottom: $body-margin-half;
      }
    }
  }
  &.story-56 {
    // Persjani
    // Genericize these
    span {
      &.fx1 {
        display: inline-block;
        margin-bottom: $body-margin-half;
      }
      &.fx2 {
        padding-left: $body-margin-half;
      }
      &.fx3 {
        padding-left: $body-margin;
      }
    }
  }
}

article {
  // fatima a.m.
  &.contributor-35 {
    .continuity .contributor {
      text-transform: lowercase;
    }
  }
}

.home {
  .story-61 {
    p {
      letter-spacing: -0.15px;
      @include clamp(7);
    }
  }
}

@media all and (max-width: $laptop-breakpoint) {
  .story-34 {
    // Manifest Kontra ż-Żmien
    h1 {
      letter-spacing: -1px;
    }
  }
}

@media all and (min-width: $laptop-breakpoint) {
  .home {
    .promo {
			&.story-20 {
				p {
					@include clamp(13);
				}
			}
      &.story-25 {
        h1 {
          letter-spacing: -1px;
        }
      }
    }
  }
  article.story {
    &.story-18 {
      .body-text {
        padding: 0 8rem;
        border: 1px solid $grid-lines;
        border-width: 0 1px;
      }
      h1 {
        width: 100%;
      }
      p {
        margin-bottom: $body-margin-half + $body-margin-quarter;
        &.enjambed {
          margin-bottom: $body-margin-quarter;
        }
      }
    }
    &.story-27 {
      .fx1 {
        white-space: nowrap;
      }
    }
    &.story-33 {
      h1 {
        letter-spacing: 0;
      }
    }
  }

  // REFACTOR ... this is not a special
  .home a:not(.promo-djarju).promo-plain.is-episode,
  .end-promos a:not(.promo-djarju).is-episode {
    header {
      margin-bottom: $body-margin-quarter;
      h3 {
        padding-top: $body-margin-quarter;
      }
    }
    p {
      @include clamp(6);
    }
  }

  .home a,
  .end-promos a {
    &.story-16,
    &.story-39,
    &.story-55,
    &.story-61 {
      header {
        margin-bottom: $body-margin-quarter;
        h3 {
          padding-top: $body-margin-quarter;
        }
      }
      p {
        @include clamp(6);
      }
    }
		&.story-98 {
			h2 {
				letter-spacing: -1px;
			}
			p {
				@include clamp(4);
			}
		}
	}

  .home a:not(.promo-djarju).promo-plain.is-episode,
  .end-promos a:not(.promo-djarju).is-episode {
    &.story-85 {
      &> header {
        margin-bottom: $body-margin-quarter;
        &> h3 {
          padding-top: $body-margin-quarter;
        }
      }
      &> div > p {
        @include clamp(4);
      }
    }
  }
}

.menu-antologija-1 {
  border: 1px solid $lightester-brown;
  padding: 0 0.25rem !important;
  vertical-align: -7px;
}

.story-89 {
	#audio figure.audio figcaption {
			display: block !important;
	}
}
// .promo.story-88 {
//   h1 {
//     color: $light-brown !important;
//   }
// }
.ga-diary a.story-94 p {
	@include clamp(11);
}
